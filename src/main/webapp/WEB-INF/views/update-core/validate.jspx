<util:panel title="Core update" id="index"
	xmlns:spring="http://www.springframework.org/tags"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:form="http://www.springframework.org/tags/form"
	xmlns:sec="http://www.springframework.org/security/tags"
	xmlns:util="urn:jsptagdir:/WEB-INF/tags/util"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:jsp="http://java.sun.com/JSP/Page">
	<jsp:output omit-xml-declaration="yes" />

	<spring:message code="button_next" var="next_button" />
	<spring:message code="button_cancel" var="cancel_button" />


	<c:forEach items="${flowRequestContext.messageContext.allMessages}" var="message">
	<c:choose>
		<c:when test="${message.severity == 'INFO' }">
			<div class="greenText">${message.text}</div>
		</c:when>
		<c:otherwise>
			<div class="errorMessage">${message.text}</div>
		</c:otherwise>
	</c:choose>
	</c:forEach>

	<h3>Are you sure you want to proceed update to the uploaded core?</h3>
	<table>
		<tr>
			<th>Uploaded core description:</th>
			<td>${coreZipFile.description}</td>
		</tr>
		<tr>
			<th>Version:</th>
			<td>${coreZipFile.version}</td>
		</tr>
	</table>
	<p>Please note that the update may take a couple of minutes. Before
		the update, all running ccf cores will be stopped and a backup will be
		created. After the upgrade, the cores that were stopped will be
		started again. Should anything go wrong, you will be returned to this
		page, so you can retry the update.</p>

	<form:form modelAttribute="fileUploadHandler" method="post">
		<input type="submit" name="_eventId_cancel" value="${cancel_button}" />
		<input type="submit" name="_eventId_submit" value="${next_button} >" />
	</form:form>

</util:panel>